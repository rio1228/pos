/*! spica v0.0.55 https://github.com/falsandtru/spica | (c) 2016, falsandtru | MIT License */
require=function e(t,n,r){function o(u,c){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],3:[function(e,t,n){"use strict";var r=e("./lib/supervisor");n.Supervisor=r.Supervisor;var o=e("./lib/observable");n.Observable=o.Observable;var i=e("./lib/cancelable");n.Cancelable=i.Cancelable;var u=e("./lib/monad/sequence");n.Sequence=u.Sequence;var c=e("./lib/monad/maybe");n.Maybe=c.Maybe,n.Just=c.Just,n.Nothing=c.Nothing;var s=e("./lib/monad/either");n.Either=s.Either,n.Left=s.Left,n.Right=s.Right;var a=e("./lib/curry");n.curry=a.curry;var f=e("./lib/flip");n.flip=f.flip;var p=e("./lib/list");n.Nil=p.Nil;var h=e("./lib/hlist");n.HNil=h.HNil;var l=e("./lib/collection/datamap");n.DataMap=l.DataMap;var v=e("./lib/collection/attrmap");n.AttrMap=v.AttrMap;var d=e("./lib/cache");n.Cache=d.Cache;var y=e("./lib/mixin");n.Mixin=y.Mixin;var _=e("./lib/tick");n.Tick=_.Tick;var m=e("./lib/uuid");n.uuid=m.v4;var b=e("./lib/sqid");n.sqid=b.sqid;var q=e("./lib/assign");n.assign=q.assign,n.clone=q.clone,n.extend=q.extend;var S=e("./lib/concat");n.concat=S.concat;var w=e("./lib/sort");n.sort=w.sort},{"./lib/assign":4,"./lib/cache":5,"./lib/cancelable":6,"./lib/collection/attrmap":7,"./lib/collection/datamap":8,"./lib/concat":10,"./lib/curry":11,"./lib/flip":12,"./lib/hlist":13,"./lib/list":14,"./lib/mixin":15,"./lib/monad/either":18,"./lib/monad/maybe":22,"./lib/monad/sequence":25,"./lib/observable":70,"./lib/sort":71,"./lib/sqid":72,"./lib/supervisor":74,"./lib/tick":76,"./lib/uuid":78}],4:[function(e,t,n){"use strict";function r(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(void 0===t||null===t)throw new TypeError("Spica: assign: Cannot walk on "+t+".");for(var o=0,i=n;o<i.length;o++){var u=i[o];if(void 0!==u&&null!==u)for(var c=0,s=Object.keys(Object(u));c<s.length;c++){var a=s[c],f=Object.getOwnPropertyDescriptor(Object(u),a);void 0!==f&&f.enumerable&&void e(a,Object(t),Object(u))}}return Object(t)}}var o=e("./type");n.assign=r(function(e,t,n){return t[e]=n[e]}),n.clone=r(function(e,t,r){switch(o.type(r[e])){case"Array":return t[e]=n.clone([],r[e]);case"Object":return t[e]=n.clone({},r[e]);default:return t[e]=r[e]}}),n.extend=r(function(e,t,r){switch(o.type(r[e])){case"Array":return t[e]=n.extend([],r[e]);case"Object":switch(o.type(t[e])){case"Function":case"Object":return t[e]=n.extend(t[e],r[e]);default:return t[e]=n.extend({},r[e])}default:return t[e]=r[e]}})},{"./type":77}],5:[function(e,t,n){"use strict";var r=function(){function e(e,t){if(void 0===t&&(t=function(){}),this.size=e,this.callback=t,this.store=new Map,this.stats={LRU:[],LFU:[]},e>0==!1)throw new Error("Spica: Cache: Cache size must be greater than 0.")}return e.prototype.put=function(e,t){if(e!==e)throw new TypeError("Spica: Cache: Cannot use NaN for key.");if(this.access(e))return void this.store.set(e,t),!0;var n=this.stats,r=n.LRU,o=n.LFU;if(r.length+o.length===this.size&&r.length<o.length){var i=o.pop(),u=this.store.get(i);void this.store.delete(i),void this.callback(i,u)}if(void r.unshift(e),void this.store.set(e,t),r.length+o.length>this.size){var c=r.pop(),u=this.store.get(c);void this.store.delete(c),void this.callback(c,u)}return!1},e.prototype.get=function(e){return void this.access(e),this.store.get(e)},e.prototype.has=function(e){return this.store.has(e)},e.prototype.delete=function(e){for(var t=this.stats,n=t.LRU,r=t.LFU,o=0,i=[r,n];o<i.length;o++){var u=i[o],c=u.indexOf(e);if(c!==-1){var s=this.store.get(e);return void this.store.delete(u.splice(c,1)[0]),void this.callback(e,s),!0}}return!1},e.prototype.clear=function(){for(var e=this.stats,t=e.LRU,n=e.LFU,r=0,o=[n,t];r<o.length;r++)for(var i=o[r];i.length>0;){var u=i.shift(),c=this.store.get(u);void this.store.delete(u),void this.callback(u,c)}},e.prototype[Symbol.iterator]=function(){return this.store[Symbol.iterator]()},e.prototype.inspect=function(){var e=this.stats,t=e.LRU,n=e.LFU;return[t,n]},e.prototype.access=function(e){return this.accessLRU(e)||this.accessLFU(e)},e.prototype.accessLRU=function(e){var t=this.stats.LRU,n=t.indexOf(e);if(n===-1)return!1;var r=this.stats.LFU;return void r.unshift.apply(r,t.splice(n,1)),!0},e.prototype.accessLFU=function(e){var t=this.stats.LFU,n=t.indexOf(e);return n!==-1&&(void t.unshift.apply(t,t.splice(n,1)),!0)},e}();n.Cache=r},{}],6:[function(e,t,n){"use strict";var r=e("./noop"),o=e("./monad/maybe"),i=e("./monad/either"),u=function(){function e(){var e=this;this.listeners=new Set,this.canceled=!1,this.promise=function(t){return e.canceled?new Promise(function(t,n){return void n(e.reason)}):Promise.resolve(t)},this.maybe=function(t){return e.canceled?o.Nothing:o.Just(t)},this.either=function(t){return e.canceled?i.Left(e.reason):i.Right(t)},this.cancel=function(t){return e.cancel=r.noop,e.canceled=!0,e.reason=t,e.listeners.forEach(function(e){return void e(t)}),e.listeners.clear(),e.listeners.add=function(t){return void t(e.reason),e.listeners},void Object.freeze(e)}}return e}();n.Cancelable=u},{"./monad/either":18,"./monad/maybe":22,"./noop":69}],7:[function(e,t,n){"use strict";var r=function(){function e(e,t,n){void 0===e&&(e=[]),void 0===t&&(t=WeakMap),void 0===n&&(n=Map);var r=this;this.KeyMap=t,this.ValueMap=n,this.store=new this.KeyMap,void Array.from(e).forEach(function(e){var t=e[0],n=e[1],o=e[2];return void r.set(t,n,o)})}return e.prototype.get=function(e,t){return this.store.get(e)&&this.store.get(e).get(t)},e.prototype.set=function(e,t,n){var r=this.store.has(e)?this.store.get(e):this.store.set(e,new this.ValueMap).get(e);return void r.set(t,n),this},e.prototype.has=function(e,t){return 1===arguments.length?this.store.has(e):this.store.has(e)&&this.store.get(e).has(t)},e.prototype.delete=function(e,t){return 1===arguments.length?this.store.delete(e):!!this.store.has(e)&&this.store.get(e).delete(t)},e}();n.AttrMap=r},{}],8:[function(e,t,n){"use strict";function r(e){return e instanceof Object==!1}var o=e("../sqid"),i=e("../type"),u=function(){function e(e){void 0===e&&(e=[]);var t=this;this.store=new Map,this.weakstore=new WeakMap,void Array.from(e).forEach(function(e){var n=e[0],r=e[1];return void t.set(n,r)})}return e.prototype.stringify=function(e){switch(typeof e){case"undefined":return"0:"+e;case"boolean":return"1:"+e;case"number":return"2:"+(1e3+(""+e).length)+":"+e;case"string":return"3:"+(1e14+e.length)+":"+e;default:return r(e)?"8:"+e:Array.isArray(e)?"9:[ "+this.stringifyArray(e)+" ]":"9:{ "+(this.stringifyObject(e)||this.weakstore.get(e)||this.weakstore.set(e,o.sqid()).get(e))+" }"}},e.prototype.stringifyArray=function(e){for(var t="",n=0,r=e;n<r.length;n++){var o=r[n];t+=""+this.stringify(o)}return t},e.prototype.stringifyObject=function(e){if("Object"!==i.type(e))return"";for(var t=Object.keys(e),n="",r=0,o=t;r<o.length;r++){var u=o[r];n+=this.stringify(u)+": "+this.stringify(e[u])}return n||" "},e.prototype.get=function(e){return(this.store.get(this.stringify(e))||[])[1]},e.prototype.set=function(e,t){return void this.store.set(this.stringify(e),[e,t]),this},e.prototype.has=function(e){return this.store.has(this.stringify(e))},e.prototype.delete=function(e){return this.store.delete(this.stringify(e))},e.prototype.clear=function(){return this.store.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this.store.size},enumerable:!0,configurable:!0}),e}();n.DataMap=u},{"../sqid":72,"../type":77}],9:[function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(e,t){void o.assign(e.prototype,t.prototype);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},e)}var o=e("./assign");n.compose=r},{"./assign":4}],10:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.length,o=e.length;n<r;++n)e[n+o]=t[n];return e}n.concat=r},{}],11:[function(e,t,n){"use strict";function r(e,t,n){return e.length===t.length?e.apply(n,t):function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r(e,t.concat(o),n)}}n.curry=function(e,t){return 0===e.length?function(){return e.call(t)}:r(e,[],t)}},{}],12:[function(e,t,n){"use strict";function r(e){return o.curry(function(t,n){return e.length>1?e(n,t):e(n)(t)})}var o=e("./curry");n.flip=r},{"./curry":11}],13:[function(e,t,n){"use strict";var r=e("./concat"),o=function(){function e(){void this.NIL}return e.prototype.push=function(e){return new i(e,this)},e.prototype.array=function(){return[]},e}();n.HNil=o;var i=function(){function e(e,t){this.head_=e,this.tail_=t,void this.CONS}return e.prototype.push=function(t){return new e(t,this)},e.prototype.head=function(){return this.head_},e.prototype.tail=function(){return this.tail_},e.prototype.walk=function(e){return void e(this.head()),this.tail()},e.prototype.modify=function(e){return this.tail().push(e(this.head()))},e.prototype.extend=function(e){return this.push(e(this.head()))},e.prototype.compact=function(e){var t=this;return this.tail().modify(function(n){return e(t.head(),n)})},e.prototype.reverse=function(){return this.array().reduce(function(e,t){return e.push(t)},new o)},e.prototype.tuple=function(){return this.array()},e.prototype.array=function(){return r.concat([this.head()],this.tail().array())},e}()},{"./concat":10}],14:[function(e,t,n){"use strict";var r=e("./concat"),o=function(){function e(){void this.NIL}return e.prototype.push=function(e){return new i(e,this)},e.prototype.array=function(){return[]},e}();n.Nil=o;var i=function(){function e(e,t){this.head_=e,this.tail_=t,void this.CONS}return e.prototype.push=function(t){return new e(t,this)},e.prototype.head=function(){return this.head_},e.prototype.tail=function(){return this.tail_},e.prototype.walk=function(e){return void e(this.head()),this.tail()},e.prototype.modify=function(e){return this.tail().push(e(this.head()))},e.prototype.extend=function(e){return this.push(e(this.head()))},e.prototype.compact=function(e){var t=this;return this.tail().modify(function(n){return e(t.head(),n)})},e.prototype.reverse=function(){return this.array().reduce(function(e,t){return e.push(t)},new o)},e.prototype.tuple=function(){return this.array()},e.prototype.array=function(){return r.concat([this.head()],this.tail().array())},e}()},{"./concat":10}],15:[function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduceRight(function(e,t){return o(t,e)},function(){function e(){}return e}())}function o(e,t){var n=function(){function n(){return e.call(t.call(this)||this)}return n}();void i.assign(n.prototype,e.prototype,t.prototype);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}var i=e("./assign");n.Mixin=r},{"./assign":4}],16:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("./functor"),i=e("../curry"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Functor);n.Applicative=u,function(e){function t(e,n){return n?e.bind(function(e){return n.fmap(function(t){return 0===e.length?e(t):i.curry(e)(t)})}):function(n){return t(e,n)}}e.ap=t}(u=n.Applicative||(n.Applicative={})),n.Applicative=u},{"../curry":11,"./functor":19}],17:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Either: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=e("./monad"),u=function(e){function t(t){var n=e.call(this,t)||this;return void n.EITHER,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new s(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof c)return r;if(r instanceof s)return e(r.extract());if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Either: Invalid monad value.\n\t"+r)})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(i.Monad);n.Either=u,function(e){function t(e){return new s(e)}e.pure=t,e.Return=t}(u=n.Either||(n.Either={})),n.Either=u;var c=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,void n.LEFT,n}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw this.a;return e(this.a)},t}(u);n.Left=c;var s=function(e){function t(t){var n=e.call(this,r)||this;return n.b=t,void n.RIGHT,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new u(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.b):this.b},t}(u);n.Right=s},{"./monad":23}],18:[function(e,t,n){"use strict";function r(e){return new u.Left(e)}function o(e){return new u.Right(e)}var i,u=e("./either.impl");!function(e){e.fmap=u.Either.fmap,e.pure=u.Either.pure,e.ap=u.Either.ap,e.Return=u.Either.Return,e.bind=u.Either.bind}(i=n.Either||(n.Either={})),n.Left=r,n.Right=o},{"./either.impl":17}],19:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("./lazy"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Lazy);n.Functor=i,function(e){function t(e,t){return t?e.fmap(t):function(t){return e.fmap(t)}}e.fmap=t}(i=n.Functor||(n.Functor={})),n.Functor=i},{"./lazy":20}],20:[function(e,t,n){"use strict";var r=function(){function e(e){this.thunk=e}return e.prototype.evaluate=function(){return this.memory_=this.memory_||this.thunk()},e}();n.Lazy=r},{}],21:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Maybe: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=e("./monadplus"),u=function(e){function t(t){var n=e.call(this,t)||this;return void n.MAYBE,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new c(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof c)return e(r.extract());if(r instanceof s)return r;if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Maybe: Invalid monad value.\n\t"+r)})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(i.MonadPlus);n.Maybe=u,function(e){function t(e){return new c(e)}e.pure=t,e.Return=t}(u=n.Maybe||(n.Maybe={})),n.Maybe=u;var c=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,void n.JUST,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new u(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.a):this.a},t}(u);n.Just=c;var s=function(e){function t(){var t=e.call(this,r)||this;return void t.NOTHING,t}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw void 0;return e()},t}(u);n.Nothing=s,function(e){function t(t,n){return new e(function(){return t.fmap(function(){return t}).extract(function(){return n})})}e.mzero=new s,e.mplus=t}(u=n.Maybe||(n.Maybe={})),n.Maybe=u},{"./monadplus":24}],22:[function(e,t,n){"use strict";function r(e){return new i.Just(e)}var o,i=e("./maybe.impl");!function(e){e.fmap=i.Maybe.fmap,e.pure=i.Maybe.pure,e.ap=i.Maybe.ap,e.Return=i.Maybe.Return,e.bind=i.Maybe.bind,e.mzero=i.Maybe.mzero,e.mplus=i.Maybe.mplus}(o=n.Maybe||(n.Maybe={})),n.Just=r,n.Nothing=i.Maybe.mzero},{"./maybe.impl":21}],23:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("./applicative"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Applicative);n.Monad=i,function(e){function t(e,n){return n?e.bind(n):function(n){return t(e,n)}}e.bind=t}(i=n.Monad||(n.Monad={})),n.Monad=i},{"./applicative":16}],24:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("./monad"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Monad);n.MonadPlus=i,function(e){}(i=n.MonadPlus||(n.MonadPlus={})),n.MonadPlus=i},{"./monad":23}],25:[function(e,t,n){"use strict";var r=e("./sequence/core");n.Sequence=r.Sequence;var o=e("./sequence/member/static/resume"),i=e("./sequence/member/static/from"),u=e("./sequence/member/static/cycle"),c=e("./sequence/member/static/random"),s=e("./sequence/member/static/concat"),a=e("./sequence/member/static/zip"),f=e("./sequence/member/static/difference"),p=e("./sequence/member/static/union"),h=e("./sequence/member/static/intersect"),l=e("./sequence/member/static/pure"),v=e("./sequence/member/static/return"),d=e("./sequence/member/static/mempty"),y=e("./sequence/member/static/mconcat"),_=e("./sequence/member/static/mappend"),m=e("./sequence/member/static/mzero"),b=e("./sequence/member/static/mplus"),q=e("./sequence/member/instance/extract"),S=e("./sequence/member/instance/iterate"),w=e("./sequence/member/instance/memoize"),O=e("./sequence/member/instance/reduce"),g=e("./sequence/member/instance/take"),j=e("./sequence/member/instance/drop"),k=e("./sequence/member/instance/takeWhile"),P=e("./sequence/member/instance/dropWhile"),x=e("./sequence/member/instance/takeUntil"),T=e("./sequence/member/instance/dropUntil"),M=e("./sequence/member/instance/sort"),A=e("./sequence/member/instance/fmap"),I=e("./sequence/member/instance/ap"),E=e("./sequence/member/instance/bind"),N=e("./sequence/member/instance/mapM"),z=e("./sequence/member/instance/filterM"),L=e("./sequence/member/instance/map"),U=e("./sequence/member/instance/filter"),R=e("./sequence/member/instance/scan"),D=e("./sequence/member/instance/fold"),C=e("./sequence/member/instance/group"),F=e("./sequence/member/instance/inits"),W=e("./sequence/member/instance/tails"),J=e("./sequence/member/instance/segs"),H=e("./sequence/member/instance/subsequences"),B=e("./sequence/member/instance/permutations"),G=e("../compose");void G.compose(r.Sequence,o.default,i.default,u.default,c.default,s.default,a.default,f.default,p.default,h.default,l.default,v.default,d.default,y.default,_.default,m.default,b.default,q.default,S.default,w.default,O.default,g.default,j.default,k.default,P.default,x.default,T.default,M.default,A.default,I.default,E.default,N.default,z.default,L.default,U.default,R.default,D.default,C.default,F.default,W.default,J.default,H.default,B.default)},{"../compose":9,"./sequence/core":26,"./sequence/member/instance/ap":27,"./sequence/member/instance/bind":28,"./sequence/member/instance/drop":29,"./sequence/member/instance/dropUntil":30,"./sequence/member/instance/dropWhile":31,"./sequence/member/instance/extract":32,"./sequence/member/instance/filter":33,"./sequence/member/instance/filterM":34,"./sequence/member/instance/fmap":35,"./sequence/member/instance/fold":36,"./sequence/member/instance/group":37,"./sequence/member/instance/inits":38,"./sequence/member/instance/iterate":39,"./sequence/member/instance/map":40,"./sequence/member/instance/mapM":41,"./sequence/member/instance/memoize":42,"./sequence/member/instance/permutations":43,"./sequence/member/instance/reduce":44,"./sequence/member/instance/scan":45,"./sequence/member/instance/segs":46,"./sequence/member/instance/sort":47,"./sequence/member/instance/subsequences":48,"./sequence/member/instance/tails":49,"./sequence/member/instance/take":50,"./sequence/member/instance/takeUntil":51,"./sequence/member/instance/takeWhile":52,"./sequence/member/static/concat":53,"./sequence/member/static/cycle":54,"./sequence/member/static/difference":55,"./sequence/member/static/from":56,"./sequence/member/static/intersect":57,"./sequence/member/static/mappend":58,"./sequence/member/static/mconcat":59,"./sequence/member/static/mempty":60,"./sequence/member/static/mplus":61,"./sequence/member/static/mzero":62,"./sequence/member/static/pure":63,"./sequence/member/static/random":64,"./sequence/member/static/resume":65,"./sequence/member/static/return":66,"./sequence/member/static/union":67,"./sequence/member/static/zip":68}],26:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Sequence: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=e("../monadplus"),u=function(e){function t(t){var n=e.call(this,r)||this;return n.cons=t,n}return o(t,e),t.prototype[Symbol.iterator]=function(){var e=this,n=function(){return e.iterate()};return{next:function(){var e=n();return n=t.Thunk.iterator(e),{done:!t.isIterable(e),value:t.Thunk.value(e)}}}},t}(i.MonadPlus);n.Sequence=u,function(e){}(u=n.Sequence||(n.Sequence={})),n.Sequence=u,function(e){function t(e){return r.iterator(e)!==o.done}var n;!function(t){function n(t,n){switch(arguments.length){case 0:return[];case 1:return[t];case 2:return[t,n];default:throw e.Exception.invalidConsError(arguments)}}t.cons=n}(n=e.Data||(e.Data={}));var r;!function(e){function t(e){return e[0]}function n(e){return e[1]}function r(e){return e[2]}e.value=t,e.iterator=n,e.index=r}(r=e.Thunk||(e.Thunk={}));var o;!function(t){function n(t,o,i){return e.isIterable(t)?i(t,function(){return n(r.iterator(t)(),o,i)}):o(t)}t.done=function(){return[void 0,t.done,-1]},t.when=n}(o=e.Iterator||(e.Iterator={})),e.isIterable=t;var i;!function(e){function t(e){return console.error(e,e.length,e[0],e[1]),new TypeError("Spica: Sequence: Invalid parameters of cons.")}function n(e){return console.error(e),new TypeError("Spica: Sequence: Invalid data.")}function r(e){return console.error(e),new TypeError("Spica: Sequence: Invalid thunk.")}e.invalidConsError=t,e.invalidDataError=n,e.invalidThunkError=r}(i=e.Exception||(e.Exception={}))}(u=n.Sequence||(n.Sequence={})),n.Sequence=u},{"../monadplus":24}],27:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.ap=function(e){return o.Sequence.ap(this,e)},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],28:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.bind=function(e){return o.Sequence.concat(this.fmap(e))},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],29:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.drop=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return o.Sequence.Thunk.index(t)<e?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],30:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],31:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],32:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.extract=function(){for(var e=this,t=[],n=function(){return e.iterate()};;){var r=n();if(!o.Sequence.isIterable(r))return t;void i.concat(t,[o.Sequence.Thunk.value(r)]),n=o.Sequence.Thunk.iterator(r)}},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../../../concat":10,"../../core":26}],33:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filter=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):n()})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],34:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filterM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.from([[]]);default:var r=n.shift();return e(r).bind(function(t){return t?0===n.length?o.Sequence.from([[r]]):o.Sequence.from(n).filterM(e).fmap(function(e){return i.concat([r],e)}):0===n.length?o.Sequence.from([[]]):o.Sequence.from(n).filterM(e)})}})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../../../concat":10,"../../core":26}],35:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.fmap=function(e){var t=this;return new o.Sequence(function(n){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],36:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.fold=function(e,t){var n=this;return new o.Sequence(function(r){return void 0===r&&(r=function(){return n.reduce().iterate()}),o.Sequence.Iterator.when(r(),function(){return o.Sequence.Data.cons(t)},function(n){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(n),o.Sequence.resume(o.Sequence.Thunk.iterator(n)).fold(e,t)));
})}).bind(function(e){return e})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],37:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.group=function(e){var t=this;return new o.Sequence(function(n,r){var u=void 0===n?[function(){return t.iterate()},[]]:n,c=u[0],s=u[1];return o.Sequence.Iterator.when(c(),function(){return 0===s.length?r():r(s)},function(t,n){return 0===s.length||e(s[0],o.Sequence.Thunk.value(t))?(i.concat(s,[o.Sequence.Thunk.value(t)]),n()):r(s,[o.Sequence.Thunk.iterator(t),i.concat([],[o.Sequence.Thunk.value(t)])])})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../../../concat":10,"../../core":26}],38:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.inits=function(){return o.Sequence.mappend(o.Sequence.from([[]]),this.scan(function(e,t){return e.concat([t])},[]).dropWhile(function(e){return 0===e.length}))},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],39:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.iterate=function(){return this.iterate_()},t.prototype.iterate_=function(e,t){var n=this;void 0===t&&(t=0);var r=this.cons(e,o.Sequence.Data.cons);switch(r.length){case 0:return[void 0,o.Sequence.Iterator.done,-1];case 1:return[r[0],function(){return o.Sequence.Iterator.done()},t];case 2:return[r[0],function(){return n.iterate_(r[1],t+1)},t];default:throw o.Sequence.Exception.invalidDataError(r)}},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],40:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.map=function(e){var t=this;return new o.Sequence(function(n){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],41:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.mapM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.mempty;default:var r=n.shift();return e(r).bind(function(t){return 0===n.length?o.Sequence.from([[t]]):o.Sequence.from(n).mapM(e).fmap(function(e){return i.concat([t],e)})})}})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../../../concat":10,"../../core":26}],42:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=new WeakMap,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.memoize=function(){var e=this;return new o.Sequence(function(t,n){var r=void 0===t?[0,i.get(e)||i.set(e,new Map).get(e)]:t,u=r[0],c=r[1];return o.Sequence.Iterator.when(c.get(u)||c.set(u,u>0&&c.has(u-1)?o.Sequence.Thunk.iterator(c.get(u-1))():e.iterate()).get(u),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),[u+1,c])})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../core":26}],43:[function(e,t,n){"use strict";function r(e,t){return i.Sequence.Iterator.when(e.iterate(),function(){return i.Sequence.mempty},function(e){return new i.Sequence(function(n,o){return i.Sequence.Iterator.when(e,function(){return o()},function(e){function n(e,t){return u(function(e){return e},e,t)[1]}function u(e,t,n){return i.Sequence.Iterator.when(t.iterate(),function(){return[s,n]},function(t){var r=i.Sequence.Thunk.value(t),o=u(function(t){return e(i.Sequence.mappend(i.Sequence.from([r]),t))},i.Sequence.resume(i.Sequence.Thunk.iterator(t)),n),s=o[0],a=o[1];return[i.Sequence.mappend(i.Sequence.from([r]),s),i.Sequence.mappend(i.Sequence.from([e(i.Sequence.mappend(i.Sequence.from([c]),i.Sequence.mappend(i.Sequence.from([r]),s))).extract()]),a)]})}var c=i.Sequence.Thunk.value(e),s=i.Sequence.resume(i.Sequence.Thunk.iterator(e)).memoize();return o(t.permutations().fold(function(e,t){return n(i.Sequence.from(e),t)},r(s,i.Sequence.mappend(i.Sequence.from([c]),t))))})}).bind(function(e){return e})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.permutations=function(){var e=this;return i.Sequence.from([0]).bind(function(){var t=e.extract();return 0===t.length?i.Sequence.mempty:i.Sequence.from([t])}).bind(function(e){return i.Sequence.mappend(i.Sequence.from([e]),r(i.Sequence.from(e),i.Sequence.mempty))})},t}(i.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../core":26}],44:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.reduce=function(){var e=this;return new o.Sequence(function(t,n){var r=void 0===t?[0,new Map]:t,i=r[0],u=r[1];return o.Sequence.Iterator.when(u.get(i)||u.set(i,i>0&&u.has(i-1)?o.Sequence.Thunk.iterator(u.get(i-1))():e.iterate()).get(i),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),[i+1,u])})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],45:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.scan=function(e,t){var n=this;return new o.Sequence(function(r){var i=void 0===r?[t,function(){return n.iterate()},0]:r,u=i[0],c=i[1],s=i[2];return o.Sequence.Iterator.when(c(),function(){return 0===s?o.Sequence.Data.cons(t):o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(u=e(u,o.Sequence.Thunk.value(t)),[u,o.Sequence.Thunk.iterator(t),o.Sequence.Thunk.index(t)+1])})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],46:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=e("../../../../concat"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.segs=function(){return o.Sequence.mappend(this.fold(function(e,t){return t.take(1).bind(function(n){return o.Sequence.mappend(o.Sequence.from([o.Sequence.mappend(o.Sequence.from([[e]]),o.Sequence.from(n).map(function(t){return i.concat([e],t)}))]),t)})},o.Sequence.from([o.Sequence.from([])])).bind(function(e){return e}),o.Sequence.from([[]]))},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../../../concat":10,"../../core":26}],47:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.sort=function(e){return o.Sequence.from(this.extract().sort(e))},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],48:[function(e,t,n){"use strict";function r(e){return i.Sequence.Iterator.when(e.iterate(),function(){return i.Sequence.mempty},function(e){return i.Sequence.mappend(i.Sequence.from([[i.Sequence.Thunk.value(e)]]),new i.Sequence(function(t,n){return i.Sequence.Iterator.when(e,function(){return n()},function(e){return n(r(i.Sequence.resume(i.Sequence.Thunk.iterator(e))).fold(function(t,n){return i.Sequence.mappend(i.Sequence.mappend(i.Sequence.from([t]),i.Sequence.from([u.concat([i.Sequence.Thunk.value(e)],t)])),n)},i.Sequence.mempty))})}).bind(function(e){return e}))})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=e("../../core"),u=e("../../../../concat"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.subsequences=function(){var e=this;return i.Sequence.mappend(i.Sequence.from([[]]),i.Sequence.from([0]).bind(function(){return r(e)}))},t}(i.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=c},{"../../../../concat":10,"../../core":26}],49:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.tails=function(){return o.Sequence.mappend(o.Sequence.from(this.extract().map(function(e,t,n){return n.slice(t)})),o.Sequence.from([[]]))},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],50:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.take=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(e>0?n():o.Sequence.Iterator.done(),function(){return r()},function(t){return o.Sequence.Thunk.index(t)+1<e?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r(o.Sequence.Thunk.value(t))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],51:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t)):r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],52:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r()})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],53:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.concat=function(e){return new o.Sequence(function(t,n){var r=void 0===t?[function(){return e.iterate()},o.Sequence.Iterator.done]:t,i=r[0],u=r[1];return o.Sequence.Iterator.when(i(),function(){return n()},function(e,t){return u=u===o.Sequence.Iterator.done?function(){return o.Sequence.Thunk.value(e).iterate()}:u,o.Sequence.Iterator.when(u(),function(){return u=o.Sequence.Iterator.done,t()},function(t){return n(o.Sequence.Thunk.value(t),[function(){return e},o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],54:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.cycle=function(e){return new o.Sequence(function t(n,r){var o=void 0===n?[e[Symbol.iterator](),0]:n,i=o[0],u=o[1],c=i.next();return c.done?t([e[Symbol.iterator](),u+1],r):r(c.value,[i,u+1])}).reduce()},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],55:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.difference=function(e,t,n){return new o.Sequence(function(r,i){var u=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=u[0],s=u[1];return o.Sequence.Iterator.when(c(),function(){return o.Sequence.Iterator.when(s(),function(){return i()},function(e){return i(o.Sequence.Thunk.value(e),[o.Sequence.Iterator.done,o.Sequence.Thunk.iterator(e)])})},function(e,t){return o.Sequence.Iterator.when(s(),function(){return i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Iterator.done])},function(r){var u=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(r));return u<0?i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),function(){return r}]):u>0?i(o.Sequence.Thunk.value(r),[function(){return e},o.Sequence.Thunk.iterator(r)]):(s=function(){return o.Sequence.Thunk.iterator(r)()},t())})})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],56:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.from=function(e){return new o.Sequence(function(t,n){var r=void 0===t?[e[Symbol.iterator](),0]:t,o=r[0],i=r[1],u=o.next();return u.done?n():n(u.value,[o,i+1])}).reduce()},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],57:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.intersect=function(e,t,n){return new o.Sequence(function(r,i){var u=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=u[0],s=u[1];return o.Sequence.Iterator.when(c(),function(){return i()},function(e,t){return o.Sequence.Iterator.when(s(),function(){return i()},function(r,u){var c=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(r));return c<0?(s=function(){return r},t()):c>0?u():i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(r)])})})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],58:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mappend=function(e,t){return o.Sequence.mconcat([e,t])},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],59:[function(e,t,n){"use strict";function r(e,t){return new i.Sequence(function(n,r){var o=void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,u=o[0],c=o[1];return i.Sequence.Iterator.when(u(),function(){return i.Sequence.Iterator.when(c(),function(){return r()},function(e){return r(i.Sequence.Thunk.value(e),[i.Sequence.Iterator.done,i.Sequence.Thunk.iterator(e)])})},function(e){return r(i.Sequence.Thunk.value(e),[i.Sequence.Thunk.iterator(e),c])})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.mconcat=function(e){return Array.from(e).reduce(function(e,t){return r(e,t)},i.Sequence.mempty)},t}(i.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},{"../../core":26}],60:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Sequence);i.mempty=new o.Sequence(function(e,t){return t()}),Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],61:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Sequence);i.mplus=o.Sequence.mappend,Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],62:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Sequence);i.mzero=o.Sequence.mempty,Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],63:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.pure=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],64:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.random=function(e){return void 0===e&&(e=function(){return Math.random()}),"function"==typeof e?o.Sequence.from(new o.Sequence(function(t,n){return n(e(),t)})):this.random().map(function(t){return e[t*e.length|0]})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],65:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.resume=function(e){return new o.Sequence(function(t,n){return void 0===t&&(t=e),o.Sequence.Iterator.when(t(),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.iterator(e))})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],66:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.Return=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],67:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.union=function(e,t,n){return new o.Sequence(function(r,i){var u=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=u[0],s=u[1];return o.Sequence.Iterator.when(c(),function(){return o.Sequence.Iterator.when(s(),function(){return i()},function(e){return i(o.Sequence.Thunk.value(e),[o.Sequence.Iterator.done,o.Sequence.Thunk.iterator(e)])})},function(e){return o.Sequence.Iterator.when(s(),function(){return i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Iterator.done])},function(t){var r=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(t));return r<0?i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),function(){return t}]):r>0?i(o.Sequence.Thunk.value(t),[function(){return e},o.Sequence.Thunk.iterator(t)]):i(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],68:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.zip=function(e,t){return new o.Sequence(function(n,r){var i=void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,u=i[0],c=i[1];return o.Sequence.Iterator.when(u(),function(){return r()},function(e){return o.Sequence.Iterator.when(c(),function(){return r()},function(t){return r([o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(t)],[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"../../core":26}],69:[function(e,t,n){"use strict";function r(){}n.noop=r},{}],70:[function(e,t,n){"use strict";var r=e("./concat"),o=e("./stringify"),i=function(){function e(){this.node_={parent:void 0,children:new Map,childrenNames:[],registers:[]}}return e.prototype.monitor=function(e,t,n){var r=this;return void 0===n&&(n=t),void this.throwTypeErrorIfInvalidSubscriber_(t,e),void this.seekNode_(e).registers.push([e,n,!0,t]),function(){return r.off(e,n)}},e.prototype.on=function(e,t,n){var r=this;return void 0===n&&(n=t),void this.throwTypeErrorIfInvalidSubscriber_(t,e),void this.seekNode_(e).registers.push([e,n,!1,function(e){return t(e)}]),function(){return r.off(e,n)}},e.prototype.off=function(e,t){switch(typeof t){case"function":return void this.seekNode_(e).registers.some(function(e,n,r){var o=e[1];if(t!==o)return!1;switch(n){case 0:return!void r.shift();case r.length-1:return!void r.pop();default:return!void r.splice(n,1)}});case"undefined":var n=this.seekNode_(e);return n.children=new Map,n.childrenNames=[],void(n.registers=[]);default:throw this.throwTypeErrorIfInvalidSubscriber_(t,e)}},e.prototype.once=function(e,t){var n=this;return void this.throwTypeErrorIfInvalidSubscriber_(t,e),this.on(e,function(r){return void n.off(e,t),t(r)},t)},e.prototype.emit=function(e,t,n){void this.drain_(e,t,n)},e.prototype.reflect=function(e,t){var n=[];return void this.emit(e,t,function(e,t){return n=t}),n},e.prototype.drain_=function(e,t,n){var r=[];if(void this.refsBelow_(this.seekNode_(e)).reduce(function(e,i){var u=i[2],c=i[3];if(!u)try{var s=c(t);n&&(r[r.length]=s)}catch(e){void 0!==e&&null!==e&&void console.error(o.stringify(e))}},void 0),void this.refsAbove_(this.seekNode_(e)).reduce(function(e,n){var r=n[2],i=n[3];if(r)try{void i(t)}catch(e){void 0!==e&&null!==e&&void console.error(o.stringify(e))}},void 0),n)try{void n(t,r)}catch(e){void console.error(o.stringify(e))}},e.prototype.refs=function(e){return this.refsBelow_(this.seekNode_(e))},e.prototype.refsAbove_=function(e){var t=e.parent,n=e.registers;for(n=r.concat([],n);t;)n=r.concat(n,t.registers),t=t.parent;return n},e.prototype.refsBelow_=function(e){var t=e.childrenNames,n=e.children,o=e.registers;o=r.concat([],o);for(var i,u=function(e){var u=t[e],s=c.refsBelow_(n.get(u));o=r.concat(o,s),0===s.length&&(void n.delete(u),void t.splice(t.findIndex(function(e){return e===u||u!==u&&e!==e}),1),void--e),i=e},c=this,s=0;s<t.length;++s)u(s),s=i;return o},e.prototype.seekNode_=function(e){for(var t=this.node_,n=0,r=e;n<r.length;n++){var o=r[n],i=t.children;i.has(o)||(void t.childrenNames.push(o),i.set(o,{parent:t,children:new Map,
childrenNames:[],registers:[]})),t=i.get(o)}return t},e.prototype.throwTypeErrorIfInvalidSubscriber_=function(e,t){switch(typeof e){case"function":return;default:throw new TypeError("Spica: Observable: Invalid subscriber.\n\t"+t+" "+e)}},e}();n.Observable=i},{"./concat":10,"./stringify":73}],71:[function(e,t,n){"use strict";function r(e,t,n,r){if(void 0===r&&(r=!1),!r&&n*n>1.25*e.length)return e.sort(t);n=n<e.length-1?n:e.length-1;for(var o=0;o<n;++o)for(var i=o+1;i<e.length;++i)if(t(e[o],e[i])>0!=!1){var u=e[o];e[o]=e[i],e[i]=u}return e}n.sort=r},{}],72:[function(e,t,n){"use strict";function r(e){if(arguments.length>0){if("number"!=typeof e)throw new TypeError("Spica: sqid: A parameter value must be a number: "+e);if(e>=0==!1)throw new TypeError("Spica: sqid: A parameter value must be a positive number: "+e);if(e%1!==0)throw new TypeError("Spica: sqid: A parameter value must be an integer: "+e)}return void 0===e?(1e15+ ++o+"").slice(1):(1e15+e+"").slice(1)}var o=0;n.sqid=r},{}],73:[function(e,t,n){"use strict";function r(e){try{return e instanceof Error&&"string"==typeof e.stack?e.stack:"toString"in e&&"function"==typeof e.toString?e+"":Object.prototype.toString.call(e)}catch(e){return r(e)}}n.stringify=r},{}],74:[function(e,t,n){"use strict";var r=e("./observable"),o=e("./tick"),i=e("./thenable"),u=e("./sqid"),c=e("./stringify"),s=e("./noop"),a=function(){function e(t){var n=void 0===t?{}:t,o=n.name,a=void 0===o?"":o,f=n.size,p=void 0===f?1/0:f,h=n.timeout,l=void 0===h?1/0:h,v=n.destructor,d=void 0===v?s.noop:v,y=this;if(this.id=u.sqid(),this.events={init:new r.Observable,loss:new r.Observable,exit:new r.Observable},this.workers=new Map,this.alive=!0,this.available=!0,this.resource=10,this.messages=[],this.deliver=function(){for(var e,t,n=Date.now(),r=y.resource,o=function(o,u){var s=Date.now();r-=s-n;var a=y.messages[o],f=a[0],p=a[1],h=a[2],l=a[3],v=a[4],d=y.workers.has(f)?y.workers.get(f).call([p,v+l-s]):void 0;if(y.available&&!d&&s<v+l)return e=o,t=u,"continue";if(0===o?void y.messages.shift():void y.messages.splice(o,1),void--o,void--u,void 0===d&&void y.events.loss.emit([f],[f,p]),void 0===d||d instanceof Error){try{void h(void 0,new Error("Spica: Supervisor: A processing has failed."))}catch(e){void console.error(c.stringify(e))}return e=o,t=u,"continue"}var _=d[0];if(i.isThenable(_))void Promise.resolve(_).then(function(e){return y.available?void h(e):void h(void 0,new Error("Spica: Supervisor: A processing has failed."))},function(){return void h(void 0,new Error("Spica: Supervisor: A processing has failed."))}).catch(function(e){return void console.error(c.stringify(e))});else try{void h(_)}catch(e){void console.error(c.stringify(e))}e=o,t=u},u=0,s=y.messages.length;y.available&&u<s&&r>0;++u)o(u,s),u=e,s=t;if(!y.available){for(;y.messages.length>0;){var a=y.messages.shift(),f=a[0],p=a[1];void y.events.loss.emit([f],[f,p])}return void void Object.freeze(y.messages)}r>0||void y.schedule()},this.constructor===e)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: Cannot instantiate abstract classes.");this.name=a,this.size=p,this.timeout=l,this.destructor_=d,void++this.constructor.count}return e.prototype.destructor=function(e){void this.deliver();try{void this.destructor_(e)}catch(e){void console.error(c.stringify(e))}this.alive=!1,void--this.constructor.count,void Object.freeze(this)},e.prototype.validate=function(){if(!this.available)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: A supervisor is already terminated.")},e.prototype.register=function(e,t,n){var r=this;if(void this.validate(),this.workers.has(e))throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+"/"+e+">: Cannot register a process multiply with the same name.");return void this.schedule(),t="function"==typeof t?{init:function(e){return e},call:t,exit:function(e){}}:t,void++this.constructor.procs,this.workers.set(e,new f(this,e,t,n,function(){return void r.workers.delete(e),void--r.constructor.procs})).get(e).terminate},e.prototype.call=function(e,t,n,r){var o=this;for(void 0===r&&(r=this.timeout),void this.validate();this.messages.length+1>this.size;){var i=this.messages.shift(),u=i[0],s=i[1],a=i[2];void this.events.loss.emit([u],[u,s]);try{void a(void 0,new Error("Spica: Supervisor: A message overflowed."))}catch(e){void console.error(c.stringify(e))}}void this.messages.push([e,t,n,r,Date.now()]),void this.schedule(),r<=0||r!==1/0&&void setTimeout(function(){return void o.deliver()},r+9)},e.prototype.cast=function(e,t,n){void 0===n&&(n=this.timeout),void this.validate();var r=this.workers.has(e)?this.workers.get(e).call([t,n]):void 0;return void 0===r&&void this.events.loss.emit([e],[e,t]),!(void 0===r||r instanceof Error)},e.prototype.refs=function(e){function t(e){return[e.name,e.process,e.state,e.terminate]}return void this.validate(),void 0===e?Array.from(this.workers.values()).map(t):this.workers.has(e)?[t(this.workers.get(e))]:[]},e.prototype.terminate=function(e,t){this.available&&(void 0===e&&(this.available=!1),void Array.from(this.workers.values()).forEach(function(e){return void e.terminate(t)}),void 0===e&&void this.destructor(t))},e.prototype.schedule=function(){void o.Tick(this.deliver,!0)},e}();a.count=0,a.procs=0,n.Supervisor=a,function(e){}(a=n.Supervisor||(n.Supervisor={})),n.Supervisor=a;var f=function(){function e(e,t,n,r,o){var u=this;this.sv=e,this.name=t,this.process=n,this.state=r,this.destructor_=o,this.alive=!0,this.available=!0,this.times=0,this.call=function(e){var t=e[0],n=e[1];if(u.available)try{u.available=!1,void++u.times,1===u.times&&(void u.sv.events.init.emit([u.name],[u.name,u.process,u.state]),u.state=u.process.init(u.state));var r=u.process.call(t,u.state);if(i.isThenable(r))return[new Promise(function(e,t){return void r.then(e,t),n===1/0?void 0:void setTimeout(function(){return void t(new Error)},n)}).then(function(e){var t=e[0],n=e[1];return void u.sv.schedule(),u.alive?(u.state=n,u.available=!0,t):Promise.reject(new Error)},function(e){throw void u.sv.schedule(),void u.terminate(e),e})];var o=r[0],c=r[1];return u.state=c,u.available=!0,[o]}catch(e){return void u.terminate(e),new Error}},this.terminate=function(e){u.alive&&void u.destructor(e)}}return e.prototype.destructor=function(e){this.alive=!1,this.available=!1,void this.destructor_(),void Object.freeze(this);try{void this.process.exit(e,this.state),void this.sv.events.exit.emit([this.name],[this.name,this.process,this.state,e])}catch(e){void this.sv.events.exit.emit([this.name],[this.name,this.process,this.state,e]),void this.sv.terminate(void 0,e)}},e}()},{"./noop":69,"./observable":70,"./sqid":72,"./stringify":73,"./thenable":75,"./tick":76}],75:[function(e,t,n){"use strict";function r(e){return!!e&&"object"==typeof e&&"function"==typeof e.then}n.isThenable=r},{}],76:[function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=!1),void c.push([e,t]),void i()}function o(){a=!1;for(var e=c.length;;){try{for(;e>0;){void--e;var t=c.shift(),n=t[0],r=t[1];if(r){if(s.has(n))continue;void s.add(n)}void n()}}catch(e){console.error(u.stringify(e));continue}s=new WeakSet;break}}function i(){a||0!==c.length&&(void Promise.resolve().then(o),a=!0)}var u=e("./stringify"),c=[],s=new WeakSet,a=!1;n.Tick=r},{"./stringify":73}],77:[function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).split(" ").pop().slice(0,-1)}n.type=r},{}],78:[function(e,t,n){"use strict";function r(){for(var e="",t=0,n=o;t<n.length;t++){var r=n[t];if("x"===r||"y"===r){var i=16*Math.random()|0,u="x"==r?i:3&i|8;e+=u.toString(16)}else e+=r}return e.toLowerCase()}var o=Object.freeze("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""));n.v4=r},{}],spica:[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}r(e("./src/export")),n.__esModule=!0},{"./src/export":3}]},{},[1,2,"spica"]);